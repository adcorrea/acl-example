/*C4*/SET SCHEMA PUBLIC
-- ACL schema sql used in HSQLDB\u000d\u000a\u000d\u000a drop table acl_entry
drop table acl_object_identity
drop table acl_class
drop table acl_sid
create table acl_sid(\u000d\u000a    id bigint generated by default as identity(start with 100) not null primary key,\u000d\u000a    principal boolean not null,\u000d\u000a    sid varchar_ignorecase(100) not null,\u000d\u000a    constraint unique_uk_1 unique(sid,principal))
create table acl_class(\u000d\u000a    id bigint generated by default as identity(start with 100) not null primary key,\u000d\u000a    class varchar_ignorecase(100) not null,\u000d\u000a    constraint unique_uk_2 unique(class)\u000d\u000a)
create table acl_object_identity(\u000d\u000a    id bigint generated by default as identity(start with 100) not null primary key,\u000d\u000a    object_id_class bigint not null,\u000d\u000a    object_id_identity bigint not null,\u000d\u000a    parent_object bigint,\u000d\u000a    owner_sid bigint,\u000d\u000a    entries_inheriting boolean not null,\u000d\u000a    constraint unique_uk_3 unique(object_id_class,object_id_identity),\u000d\u000a    constraint foreign_fk_1 foreign key(parent_object)references acl_object_identity(id),\u000d\u000a    constraint foreign_fk_2 foreign key(object_id_class)references acl_class(id),\u000d\u000a    constraint foreign_fk_3 foreign key(owner_sid)references acl_sid(id)\u000d\u000a)
create table acl_entry(\u000d\u000a    id bigint generated by default as identity(start with 100) not null primary key,\u000d\u000a    acl_object_identity bigint not null,\u000d\u000a    ace_order int not null,\u000d\u000a    sid bigint not null,\u000d\u000a    mask integer not null,\u000d\u000a    granting boolean not null,\u000d\u000a    audit_success boolean not null,\u000d\u000a    audit_failure boolean not null,\u000d\u000a    constraint unique_uk_4 unique(acl_object_identity,ace_order),\u000d\u000a    constraint foreign_fk_4 foreign key(acl_object_identity) references acl_object_identity(id),\u000d\u000a    constraint foreign_fk_5 foreign key(sid) references acl_sid(id)\u000d\u000a)
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
INSERT INTO ACL_SID VALUES(100,TRUE,'leo')
INSERT INTO ACL_CLASS VALUES(100,'com.adcorreajr.pss.acl.domain.Post')
INSERT INTO ACL_OBJECT_IDENTITY VALUES(100,100,749806588,NULL,100,TRUE)
INSERT INTO ACL_SID VALUES(101,FALSE,'ROLE_ADMIN')
INSERT INTO ACL_SID VALUES(102,FALSE,'ROLE_USER')
INSERT INTO ACL_ENTRY VALUES(100,100,0,100,16,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(101,100,1,101,8,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(102,100,2,102,1,TRUE,FALSE,FALSE)
DELETE FROM ACL_OBJECT_IDENTITY WHERE ID=100
INSERT INTO ACL_OBJECT_IDENTITY VALUES(100,100,749806588,NULL,100,TRUE)
COMMIT
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
INSERT INTO ACL_SID VALUES(103,TRUE,'luna')
INSERT INTO ACL_OBJECT_IDENTITY VALUES(101,100,749806619,NULL,103,TRUE)
INSERT INTO ACL_ENTRY VALUES(103,101,0,103,16,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(104,101,1,101,8,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(105,101,2,101,1,TRUE,FALSE,FALSE)
DELETE FROM ACL_OBJECT_IDENTITY WHERE ID=101
INSERT INTO ACL_OBJECT_IDENTITY VALUES(101,100,749806619,NULL,103,TRUE)
COMMIT
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
INSERT INTO ACL_OBJECT_IDENTITY VALUES(102,100,749806650,NULL,100,TRUE)
INSERT INTO ACL_ENTRY VALUES(106,102,0,100,16,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(107,102,1,101,8,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(108,102,2,102,1,TRUE,FALSE,FALSE)
DELETE FROM ACL_OBJECT_IDENTITY WHERE ID=102
INSERT INTO ACL_OBJECT_IDENTITY VALUES(102,100,749806650,NULL,100,TRUE)
COMMIT
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
INSERT INTO ACL_SID VALUES(104,TRUE,'massimo')
INSERT INTO ACL_OBJECT_IDENTITY VALUES(103,100,749806681,NULL,104,TRUE)
INSERT INTO ACL_ENTRY VALUES(109,103,0,104,16,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(110,103,1,101,8,TRUE,FALSE,FALSE)
INSERT INTO ACL_ENTRY VALUES(111,103,2,101,1,TRUE,FALSE,FALSE)
DELETE FROM ACL_OBJECT_IDENTITY WHERE ID=103
INSERT INTO ACL_OBJECT_IDENTITY VALUES(103,100,749806681,NULL,104,TRUE)
COMMIT
DISCONNECT
